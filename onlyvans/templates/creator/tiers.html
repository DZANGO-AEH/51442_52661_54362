{% extends 'base.html' %}{% block title %}Tiers{% endblock %}
{% load crispy_forms_tags %}
{% block content %}
{% include 'messages.html' %}
<div class="container main py-5">
    <h2>🏅 Your Tiers
        <a class="btn btn-primary" href="{% url 'creator:create-tier' %}">Add a new Tier</a>
    </h2>
    <hr>

{% for tier in tiers %}
<div class="card mb-3">
    <div class="card-header">{{ tier.name }}:&nbsp;<strong>${{ tier.price }}</strong></div>
    <div class="card-body">
        <p>{{ tier.description }}</p>
        <p>Message Permission: <strong>{{ tier.message_permission|yesno:"Yes,No" }}</strong></p>
        <h5>Subscribers ({{ tier.subscriber_count }}):</h5>
            {% for subscriber in tier.subscribers %}
            <a href="{% url 'profile' subscriber.user.username %}"><span class="badge text-bg-primary">@{{ subscriber.user.username }}</span></a>
            {% empty %}
            <span>No subscribers yet.</span>
            {% endfor %}
    </div>
</div>
{% empty %}
<p>You have no tiers defined.</p>
{% endfor %}
</div>
{% endblock %}